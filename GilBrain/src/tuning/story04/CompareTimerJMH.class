package com.perf.timer;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.concurrent.TimeUnit;

import org.openjdk.jmh.annotations.BenchmarkMode;
import org.openjdk.jmh.annotations.GenerateMicroBenchmark;
import org.openjdk.jmh.annotations.Mode;
import org.openjdk.jmh.annotations.OutputTimeUnit;

// JMH Class 선언 시 반드시 Annotation을 지정할 필요는 없지만, 이렇게 하면 기본 옵션으로 수행되기에 평균 응답 시간 측정을 위해 @BenchmarkMode로 옵션을 지정
@BenchmarkMode({ Mode.AverageTime })
// @OutputTimeUnit Annotation을 사용하여 출력 시간 단위를 밀리초로 지정, 기본 옵션이 밀리이지만 시간 단위를 옵션으로 명시할 수 있는 예시
@OutputTimeUnit(TimeUnit.MILLISECONDS)
public class CompareTimerJMH {

    // 측정 대상이 되는 메소드를 선언할 때 사용, 해당 클래스에 메소드가 많이 있어도 이 Annotation을 설정하지 않으면 테스트 대상 제외
    @GenerateMicroBenchmark
    public DummyData makeObject(){
        HashMap<String, String> map = new HashMap<String, String>(1000000);
        ArrayList<String> list = new ArrayList<String>(1000000);
        return new DummyData(map, list);
    }
}